<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location Logger</title>
    <style>
    body{
      font-family: Arial;
      text-align:center;
      background:#f4f7fb;
      padding:30px;
    }
    .box{
      background:white;
      padding:20px;
      border-radius:10px;
      width:350px;
      margin:auto;
      box-shadow:0 0 10px rgba(0,0,0,0.1);
    }
    button{
      padding:10px 20px;
      border:none;
      background:#007bff;
      color:white;
      border-radius:6px;
      cursor:pointer;
      font-size:16px;
    }
    button:hover{
      background:#0056b3;
    }
    #result{
      margin-top:15px;
      font-weight:bold;
    }
    ul{
      text-align:left;
      padding:0;
      list-style:none;
    }
    li{
      background:#eef3ff;
      margin:5px 0;
      padding:8px;
      border-radius:6px;
      font-size:14px;
    }
  </style>
</head>
<body>
    <body onload="loadHistory()">

<div class="box">
  <h2>üìç Location Logger</h2>

  <button onclick="getLocation()">Get My Location</button>

  <div id="result"></div>

  <h3>Last 5 Locations</h3>
  <ul id="history"></ul>
</div>

<script>
function getLocation(){
  const result = document.getElementById("result");

  if(!navigator.geolocation){
    result.innerHTML="Geolocation not supported.";
    return;
  }

  result.innerHTML="Fetching location...";

  navigator.geolocation.getCurrentPosition(success, error,{
    enableHighAccuracy:true,
    timeout:10000,
    maximumAge:0
  });
}

function success(position){
  const lat = position.coords.latitude;
  const lon = position.coords.longitude;

  document.getElementById("result").innerHTML =
    "Latitude: "+lat+"<br>Longitude: "+lon;

  saveLocation(lat,lon);
}

function error(err){
  let msg="";

  switch(err.code){
    case err.PERMISSION_DENIED:
      msg="Permission Denied.";
      break;
    case err.POSITION_UNAVAILABLE:
      msg="Location Unavailable.";
      break;
    case err.TIMEOUT:
      msg="Request Timeout.";
      break;
    default:
      msg="Unknown Error.";
  }

  document.getElementById("result").innerHTML=msg;
}

function saveLocation(lat,lon){
  let locations = JSON.parse(localStorage.getItem("locations")) || [];

  locations.unshift({
    latitude:lat,
    longitude:lon,
    time:new Date().toLocaleString()
  });

  if(locations.length>5){
    locations.pop();
  }

  localStorage.setItem("locations",JSON.stringify(locations));

  loadHistory();
}

function loadHistory(){
  const list=document.getElementById("history");
  list.innerHTML="";

  let locations = JSON.parse(localStorage.getItem("locations")) || [];

  locations.forEach(loc=>{
    let li=document.createElement("li");
    li.innerHTML=
      "Lat: "+loc.latitude+
      "<br>Lon: "+loc.longitude+
      "<br><small>"+loc.time+"</small>";
    list.appendChild(li);
  });
}
</script>
</body>
</html>